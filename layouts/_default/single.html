{{ define "meta" }}
  {{ $desc := .Params.description | default .Site.Params.description }}
  {{ $ogtitle := .Params.og_title | default (printf "%s | %s" .Title .Site.Title) }}
  {{ $ogdesc := .Params.og_description | default $desc }}
  {{ $ogimage := .Params.og_image | default .Site.Params.og_image }}

  <link rel="canonical" href="{{ .Permalink }}">

  <!-- Open Graph -->
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="{{ .Site.Title }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:title" content="{{ $ogtitle }}">
  <meta property="og:description" content="{{ $ogdesc }}">
  {{ with $ogimage }}<meta property="og:image" content="{{ . | absURL }}">{{ end }}

  <!-- SEO -->
  <meta name="description" content="{{ $desc }}">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ $ogtitle }}">
  <meta name="twitter:description" content="{{ $ogdesc }}">
  {{ with $ogimage }}<meta name="twitter:image" content="{{ . | absURL }}">{{ end }}
{{ end }}

{{ define "main" }}
  <div class="container">
    <h1>{{ .Title }}</h1>
    {{ $clean := replaceRE `(?isU)^<h1[^>]*>.*</h1>\s*` "" .Content }}
    {{ $clean | safeHTML }}
  </div>
{{ end }}
